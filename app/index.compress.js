"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_createClass=function(){function n(e,t){for(var i,n=0;n<t.length;n++)(i=t[n]).enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}return function(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var Floating=function(){function t(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0];_classCallCheck(this,t),this.FIRM=e,this.floatingBuffer={},this.defaultProperties={offsetBottom:0,offsetTop:0,fixedSelector:"floating-fixed",absoluteSelector:"floating-absolute",disableInlineStyles:!1,disableClasses:!1,minWidth:0,maxWidth:1/0}}return _createClass(t,[{key:"empty",value:function(e){var t=!0,i=!1,n=void 0;try{for(var r,o=[void 0,null,!1,0,"","0"][Symbol.iterator]();!(t=(r=o.next()).done);t=!0)if(r.value===e)return!0}catch(e){i=!0,n=e}finally{try{!t&&o.return&&o.return()}finally{if(i)throw n}}if("object"===(void 0===e?"undefined":_typeof(e))){var l=Object.prototype.toString.call(e).toLowerCase();if(-1!==l.indexOf("element")||-1!==l.indexOf("html"))return!1;for(var s in e)if(e.hasOwnProperty(s))return!1;return!0}return!1}},{key:"numericVal",value:function(e){if(this.empty(e))return 0;var t=parseFloat(e);return isNaN(t)?0:t}},{key:"getStyle",value:function(e,t){var i=e.currentStyle||window.getComputedStyle(e);return i.hasOwnProperty(t)?isNaN(parseFloat(i[t]))?i[t]:this.numericVal(i[t]):0}},{key:"getDimensions",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],i=0,n=0;return this.isHtmlElement(e)&&(i=this.numericVal(e.offsetWidth),n=this.numericVal(e.offsetHeight),!0===t&&(i+=this.getStyle(e,"marginRight")+this.getStyle(e,"marginLeft"),n+=this.getStyle(e,"marginTop")+this.getStyle(e,"marginBottom"))),{width:i,height:n}}},{key:"getOffset",value:function(e){var t=e.getBoundingClientRect(),i=this.numericVal(window.pageXOffset||document.documentElement.scrollLeft),n=this.numericVal(window.pageYOffset||document.documentElement.scrollTop);return{top:this.numericVal(t.top)+n,left:this.numericVal(t.left)+i}}},{key:"pageDimensions",value:function(){var e=window,t=document,i=t.documentElement,n=t.body,r=e.innerWidth||i.clientWidth||n.clientWidth,o=e.innerHeight||i.clientHeight||n.clientHeight;return{width:this.numericVal(r),height:this.numericVal(o)}}},{key:"checkDimensions",value:function(e){var t=this.pageDimensions();return t.width>=e.minWidth&&t.width<=e.maxWidth}},{key:"rTrim",value:function(e,t){var i=e.replace("Â "," ").split(" ").filter(function(e){return e});return!0===t?i.join(""):i.join(" ")}},{key:"inArray",value:function(e,t){var i=!0,n=!1,r=void 0;try{for(var o,l=e[Symbol.iterator]();!(i=(o=l.next()).done);i=!0)if(o.value===t)return!0}catch(e){n=!0,r=e}finally{try{!i&&l.return&&l.return()}finally{if(n)throw r}}return!1}},{key:"addClass",value:function(e,t){var i=this.rTrim(e.className),n=i.split(" ");return this.inArray(n,t)||(0<i.length&&(i+=" "),i+=t,e.className=this.rTrim(i)),this}},{key:"removeClass",value:function(e,t){var i=this.rTrim(e.className),n=i.split(" "),r="";return this.inArray(n,t)&&(i.split(" ").map(function(e){e!==t&&0<e.length&&(r+=" "+e)}),e.className=this.rTrim(r)),this}},{key:"floatingIDGenerator",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"floatBufferNumber",t=""+e+Math.round(1e6*Math.random());return this.floatingBuffer.hasOwnProperty(t)&&(t=this.floatingIDGenerator(e)),t}},{key:"createElementIndex",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},i=this.floatingIDGenerator();if(this.floatingBuffer[i]={},this.floatingBuffer[i].mainElement=e,!t.hasOwnProperty("wrapper")||this.empty(t.wrapper))this.floatingBuffer[i].wrapper=e.parentNode;else if(this.isHtmlElement(t.wrapper)&&t.wrapper!==e)this.floatingBuffer[i].wrapper=t.wrapper;else{var n=e.parentNode;if("string"==typeof t.wrapper){var r=document.querySelector(t.wrapper);1==!!r&&r!==e&&(n=r)}this.floatingBuffer[i].wrapper=n}for(var o in this.defaultProperties)this.defaultProperties.hasOwnProperty(o)&&(this.floatingBuffer[i][o]=t.hasOwnProperty(o)&&!this.empty(t[o])?t[o]:this.defaultProperties[o])}},{key:"elementPosition",value:function(e){for(var t in this.floatingBuffer)if(this.floatingBuffer.hasOwnProperty(t)&&"object"===_typeof(this.floatingBuffer[t])){var i=this.floatingBuffer[t];if(!1===this.checkDimensions(i))return;var n=i.mainElement,r=i.wrapper,o=i.offsetTop,l=i.fixedSelector,s=i.absoluteSelector;if(!1===this.FIRM&&this.getDimensions(r).height>this.getDimensions(n.parentNode).height)return n.style.position="static",void this.removeClass(n,l).removeClass(n,s);var a=this.getOffset(r).top,u=this.getStyle(r,"borderBottom"),f=0;n.parentNode===r&&(f=this.getStyle(r,"paddingBottom"));var h=this.getDimensions(r).height-(u+f),c=this.getDimensions(n,!0).height,p=a+h-(i.offsetBottom+c);this.empty(i.elementTop)&&(i.elementTop=this.getOffset(n).top);var m=this.numericVal(i.elementTop);if(i.hasOwnProperty("positionOrigin")&&this.empty(i.positionOrigin)&&(i.positionOrigin={},i.positionOrigin.position=this.getStyle(n,"position"),i.positionOrigin.top=this.getStyle(n,"top")),m-o<=e&&e<p-o)!0!==i.disableInlineStyles&&(n.style.position="fixed",n.style.top=o+"px"),!0!==i.disableClasses&&this.addClass(n,l).removeClass(n,s);else if(p-o<=e){if(!0!==i.disableInlineStyles){var y=p;"relative"===this.getStyle(n.parentNode,"position").toLowerCase()&&(y-=a),n.style.position="absolute",n.style.top=y+"px"}!0!==i.disableClasses&&this.addClass(n,s).removeClass(n,l)}else!0!==i.disableInlineStyles&&(this.empty(i.positionOrigin)?n.style.position="static":(n.style.position=i.positionOrigin.position,n.style.top=this.numericVal(i.positionOrigin.top)+"px")),!0!==i.disableClasses&&this.removeClass(n,l).removeClass(n,s),delete i.elementTop}}},{key:"scrollPosition",value:function(){var e=document.documentElement;return(window.pageYOffset||e.scrollTop)-(e.clientTop||0)}},{key:"scrollEvent",value:function(){var e=this;return window.addEventListener("scroll",function(){e.elementPosition(e.scrollPosition())}),this}},{key:"getCurrentScriptElement",value:function(){return document.currentScript||(e=document.querySelectorAll("script"))[e.length-1];var e}},{key:"getPreviousElement",value:function(){var e,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;return 1==!!(e=1==!!t?t.previousSibling:this.getCurrentScriptElement().previousSibling)&&1!==e.nodeType?this.getPreviousElement(e):e}},{key:"isHtmlElement",value:function(e){var t=Object.prototype.toString.call(e).toLowerCase();return-1!==t.indexOf("element")||-1!==t.indexOf("html")}},{key:"start",value:function(){var s=this,a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,u=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return document.addEventListener("DOMContentLoaded",function(){if(1!=!!a&&(a=s.getPreviousElement()),s.isHtmlElement(a))s.createElementIndex(a,u);else{if(null===a)return void console.trace("Element not found!");var e=a;if("string"==typeof a&&(e=document.querySelectorAll(a)),1!=!!e||!e.length)return void console.trace("Element not found!");var t=!0,i=!1,n=void 0;try{for(var r,o,l=e[Symbol.iterator]();!(t=(r=l.next()).done);t=!0)o=r.value,s.createElementIndex(o,u)}catch(e){i=!0,n=e}finally{try{!t&&l.return&&l.return()}finally{if(i)throw n}}}s.elementPosition(s.scrollPosition()),s.scrollEvent()}),this}}]),t}();